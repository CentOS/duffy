---
app:
  loglevel: warning
  host: 0.0.0.0
  port: 8080
  logging:
    version: 1
    disable_existing_loggers: false
    formatters:
      default:
        (): uvicorn.logging.DefaultFormatter
        fmt: '%(levelprefix)s %(message)s'
        use_colors: null
      access:
        (): uvicorn.logging.AccessFormatter
        fmt: '%(levelprefix)s %(client_addr)s - "%(request_line)s" %(status_code)s'
    handlers:
      default:
        class: logging.StreamHandler
        formatter: default
        stream: ext://sys.stderr
      access:
        class: logging.StreamHandler
        formatter: access
        stream: ext://sys.stdout
      syslog:
        class: logging.handlers.SysLogHandler
        address: /dev/log
    loggers:
      duffy:
        handlers:
        - default
        - syslog
      uvicorn:
        handlers:
        - default
        level: INFO
      uvicorn.error:
        level: INFO
      uvicorn.access:
        handlers:
        - access
        level: INFO
        propagate: false

metaclient:
  host: 0.0.0.0
  port: 9090
  dest: http://127.0.0.1:8080
  usermap:
    "fca07101-daea-4b8c-acb4-88ba8ae7654c": "hahahahahatheystoppedlegacysupporthahahahaha"
  poolmap:
    physical-centos7-x86_64:
      version: "7"
      arch: "x86_64"
    physical-centos8stream-x86_64:
      version: "8Stream"
      arch: "x86_64"
    virtual-centos7-aarch64-medium:
      version: "7"
      arch: "aarch64"
    virtual-centos8stream-aarch64-medium:
      version: "8Stream"
      arch: "aarch64"
  logging:
    version: 1
    disable_existing_loggers: false
    formatters:
      default:
        (): uvicorn.logging.DefaultFormatter
        fmt: '%(levelprefix)s %(message)s'
        use_colors: null
      access:
        (): uvicorn.logging.AccessFormatter
        fmt: '%(levelprefix)s %(client_addr)s - "%(request_line)s" %(status_code)s'
    handlers:
      default:
        class: logging.StreamHandler
        formatter: default
        stream: ext://sys.stderr
      access:
        class: logging.StreamHandler
        formatter: access
        stream: ext://sys.stdout
      syslog:
        class: logging.handlers.SysLogHandler
        address: /dev/log
    loggers:
      duffy:
        handlers:
        - default
        - syslog
      uvicorn:
        handlers:
        - default
        level: INFO
      uvicorn.error:
        level: INFO
      uvicorn.access:
        handlers:
        - access
        level: INFO
        propagate: false

celery:
  broker_url: "redis://localhost:6379"
  result_backend: "redis://localhost:6379"

database:
  sqlalchemy:
    sync_url: "sqlite:///:memory:"
    # the DB dialect must be async-compatible
    async_url: "sqlite+aiosqlite:///:memory:"
